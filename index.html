<!DOCTYPE html>
<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="public/css/base.css">
    <link rel="stylesheet" href="public/css/layout.css">
    <script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

  <div class="container">
    <div class="row">
      <div class="header">
        <h2>
          Mini
        </h2>
        <button id="more">More Tweets</button>
      </div>
    </div>
 
    <div class="row">
      <div class="tweets">
      </div>
    </div>
  </div>

    <script>

      $(document).ready(function(){
        var $tweets = $('.tweets');
        $tweets.html('');

        var index = 0;
        var pullTweets = function() {
          var currentTop = streams.home.length - 1;
          while(index <= currentTop){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            var $tweetAuth = $("<div class='author'></div>");
            var $tweetDesc = $("<div class='description'></div>");
            var $tweetTime = $("<span class='time'></span>");

            var date = new Date( tweet.created_at );
            $tweetAuth.text('@' + tweet.user);
            $tweetDesc.text(tweet.message);
            $tweetTime.text(date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds() );

            $tweetAuth.appendTo($tweet);
            $tweetTime.appendTo($tweet);
            $tweetDesc.appendTo($tweet);

            $tweet.prependTo($tweets);
            index += 1;
          }
        };

        var $button = $('#more');
        $button.on('click', function() {
          pullTweets();
        });

        pullTweets();
      });

    </script>
  </body>
</html>
